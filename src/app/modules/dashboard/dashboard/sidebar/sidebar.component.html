<div class="sidebar-container">
  <!-- Overlay for mobile -->
  <div *ngIf="isMobile && sidebarOpen" 
       class="fixed inset-0 bg-black bg-opacity-50 z-40 lg:hidden"
       (click)="closeSidebarOnMobile()"></div>

  <!-- Sidebar -->
  <aside class="sidebar fixed right-0 top-0 h-full z-50 flex flex-col overflow-hidden transition-all duration-300 ease-in-out"
         [class.sidebar-collapsed]="isCollapsed && !isMobile"
         [class.sidebar-expanded]="!isCollapsed || isMobile"
         [class.mobile-hidden]="isMobile && !sidebarOpen"
         [class.mobile-visible]="isMobile && sidebarOpen">
    
    <!-- Header Section -->
    <div class="sidebar-header p-4 border-b border-teal-600">
      <div class="flex items-center justify-between">
        <div class="flex items-center">
          <div class="w-10 h-10 rounded-full bg-white flex items-center justify-center ml-3">
            <i class="pi pi-book text-xl text-teal-600"></i>
          </div>
          <div class="sidebar-text">
            <h2 class="text-lg font-bold text-white">دار الكتاب</h2>
            <p class="text-sm text-teal-200">لوحة تحكم الإدارة</p>
          </div>
        </div>
        <button *ngIf="!isMobile" 
                class="sidebar-text p-2 rounded-full hover:bg-white hover:bg-opacity-10 transition-colors text-white"
                (click)="toggleSidebar()">
          <i class="pi pi-angle-right text-lg" [class.pi-angle-left]="isCollapsed"></i>
        </button>
      </div>
    </div>

    <!-- Navigation Menu -->
    <nav class="flex-1 overflow-y-auto py-4 custom-scrollbar">
      <!-- Main Section -->
      <div class="px-3 mb-6">
        <div class="sidebar-text mb-3">
          <h3 class="px-3 text-xs font-semibold text-teal-300 uppercase tracking-wider">القائمة الرئيسية</h3>
        </div>
        
        <a routerLink="/dashboard" 
           routerLinkActive="active"
           class="sidebar-link flex items-center p-3 rounded-lg text-white hover:bg-white hover:bg-opacity-10 transition-all duration-200 mb-2"
           (click)="closeSidebarOnMobile()">
          <i class="pi pi-home text-lg sidebar-icon ml-3"></i>
          <span class="sidebar-text">الرئيسية</span>
        </a>
      </div>

      <!-- Student Management -->
      <div class="px-3 mb-6">
        <div class="sidebar-text mb-3">
          <h3 class="px-3 text-xs font-semibold text-teal-300 uppercase tracking-wider">إدارة الطلاب</h3>
        </div>
        
        <a routerLink="/students" 
           routerLinkActive="active"
           class="sidebar-link flex items-center p-3 rounded-lg text-white hover:bg-white hover:bg-opacity-10 transition-all duration-200 mb-2"
           (click)="closeSidebarOnMobile()">
          <i class="pi pi-users text-lg sidebar-icon ml-3"></i>
          <span class="sidebar-text">قائمة الطلاب</span>
          <span class="badge mr-auto sidebar-text">142</span>
        </a>
        
        <a routerLink="/student/add" 
           routerLinkActive="active"
           class="sidebar-link flex items-center p-3 rounded-lg text-white hover:bg-white hover:bg-opacity-10 transition-all duration-200 mb-2"
           (click)="closeSidebarOnMobile()">
          <i class="pi pi-user-plus text-lg sidebar-icon ml-3"></i>
          <span class="sidebar-text">إضافة طالب</span>
        </a>
        
        <a routerLink="/dailyattandance" 
           routerLinkActive="active"
           class="sidebar-link flex items-center p-3 rounded-lg text-white hover:bg-white hover:bg-opacity-10 transition-all duration-200 mb-2"
           (click)="closeSidebarOnMobile()">
          <i class="pi pi-calendar-check text-lg sidebar-icon ml-3"></i>
          <span class="sidebar-text">سجل الحضور</span>
        </a>
      </div>

      <!-- Teacher Management -->
      <div class="px-3 mb-6">
        <div class="sidebar-text mb-3">
          <h3 class="px-3 text-xs font-semibold text-teal-300 uppercase tracking-wider">إدارة المعلمين</h3>
        </div>
        
        <a routerLink="/teacher" 
           routerLinkActive="active"
           class="sidebar-link flex items-center p-3 rounded-lg text-white hover:bg-white hover:bg-opacity-10 transition-all duration-200 mb-2"
           (click)="closeSidebarOnMobile()">
          <i class="pi pi-user-edit text-lg sidebar-icon ml-3"></i>
          <span class="sidebar-text">قائمة المعلمين</span>
          <span class="badge blue mr-auto sidebar-text">12</span>
        </a>
        
        <!-- <a routerLink="/sessionschedule" 
           routerLinkActive="active"
           class="sidebar-link flex items-center p-3 rounded-lg text-white hover:bg-white hover:bg-opacity-10 transition-all duration-200 mb-2"
           (click)="closeSidebarOnMobile()">
          <i class="pi pi-user-plus text-lg sidebar-icon ml-3"></i>
          <span class="sidebar-text">إضافة معلم</span>
        </a> -->
      </div>

      <!-- Groups Management -->
      <div class="px-3 mb-6">
        <div class="sidebar-text mb-3">
          <h3 class="px-3 text-xs font-semibold text-teal-300 uppercase tracking-wider">إدارة المجموعات</h3>
        </div>
        
        <a routerLink="/gruops" 
           routerLinkActive="active"
           class="sidebar-link flex items-center p-3 rounded-lg text-white hover:bg-white hover:bg-opacity-10 transition-all duration-200 mb-2"
           (click)="closeSidebarOnMobile()">
          <i class="pi pi-sitemap text-lg sidebar-icon ml-3"></i>
          <span class="sidebar-text">المجموعات</span>
          <span class="badge green mr-auto sidebar-text">8</span>
        </a>
        
        <a routerLink="/sessionschedule" 
           routerLinkActive="active"
           class="sidebar-link flex items-center p-3 rounded-lg text-white hover:bg-white hover:bg-opacity-10 transition-all duration-200 mb-2"
           (click)="closeSidebarOnMobile()">
          <i class="pi pi-plus-circle text-lg sidebar-icon ml-3"></i>
          <span class="sidebar-text">ادارة الحصص  </span>
        </a>
      </div>

      <!-- Booking System -->
      <div class="px-3 mb-6">
        <div class="sidebar-text mb-3">
          <h3 class="px-3 text-xs font-semibold text-teal-300 uppercase tracking-wider">نظام الحجز</h3>
        </div>
        
        <a routerLink="/booking" 
           routerLinkActive="active"
           class="sidebar-link flex items-center p-3 rounded-lg text-white hover:bg-white hover:bg-opacity-10 transition-all duration-200 mb-2"
           (click)="closeSidebarOnMobile()">
          <i class="pi pi-bookmark text-lg sidebar-icon ml-3"></i>
          <span class="sidebar-text">نظام الحجز</span>
          <span class="badge yellow mr-auto sidebar-text">5</span>
        </a>
      </div>

      <!-- Reports -->
      <div class="px-3 mb-6">
        <div class="sidebar-text mb-3">
          <h3 class="px-3 text-xs font-semibold text-teal-300 uppercase tracking-wider">التقارير</h3>
        </div>
        
        <div class="relative">
          <button class="sidebar-link flex items-center p-3 rounded-lg text-white hover:bg-white hover:bg-opacity-10 transition-all duration-200 mb-2 w-full"
                  (click)="toggleDropdown()">
            <i class="pi pi-chart-bar text-lg sidebar-icon ml-3"></i>
            <span class="sidebar-text">التقارير</span>
            <i class="pi pi-angle-down text-sm mr-auto sidebar-text transition-transform duration-200"
               [class.rotate-180]="isDropdownOpen"></i>
          </button>
          
          <div class="dropdown-menu overflow-hidden transition-all duration-300"
               [class.max-h-0]="!isDropdownOpen"
               [class.max-h-40]="isDropdownOpen">
            <div class="sidebar-text bg-white bg-opacity-5 rounded-lg mx-2 mb-2">
              <a routerLink="/reports/students" 
                 class="flex items-center p-2 text-teal-100 hover:bg-white hover:bg-opacity-10 rounded transition-colors"
                 (click)="closeSidebarOnMobile(); closeDropdown()">
                <i class="pi pi-users text-sm ml-3"></i>
                <span class="text-sm">تقارير الطلاب</span>
              </a>
              <a routerLink="/reports/groups" 
                 class="flex items-center p-2 text-teal-100 hover:bg-white hover:bg-opacity-10 rounded transition-colors"
                 (click)="closeSidebarOnMobile(); closeDropdown()">
                <i class="pi pi-sitemap text-sm ml-3"></i>
                <span class="text-sm">تقارير المجموعات</span>
              </a>
              <a routerLink="/reports/financial" 
                 class="flex items-center p-2 text-teal-100 hover:bg-white hover:bg-opacity-10 rounded transition-colors"
                 (click)="closeSidebarOnMobile(); closeDropdown()">
                <i class="pi pi-chart-line text-sm ml-3"></i>
                <span class="text-sm">التقارير المالية</span>
              </a>
            </div>
          </div>
        </div>
      </div>
    </nav>

  

  </aside>



  <button *ngIf="isMobile" 
        (click)="toggleSidebar()"
        class="fixed bottom-6 right-6 z-40 p-4 bg-teal-600 text-white rounded-full shadow-lg hover:bg-teal-700 transition-colors lg:hidden">
  <i class="pi" [class.pi-bars]="!sidebarOpen" [class.pi-times]="sidebarOpen"></i>
</button>

<!-- Desktop Toggle Button - Always Visible -->
<button *ngIf="!isMobile" 
        (click)="toggleSidebar()"
        class="fixed top-4 z-50 p-3 bg-teal-600 text-white rounded-full shadow-lg hover:bg-teal-700 transition-all duration-300"
        [class.right-4]="isCollapsed"
        [class.right-72]="!isCollapsed">
  <i class="pi transition-transform duration-300" 
     [class.pi-angle-left]="!isCollapsed" 
     [class.pi-angle-right]="isCollapsed"></i>
</button>
</div>