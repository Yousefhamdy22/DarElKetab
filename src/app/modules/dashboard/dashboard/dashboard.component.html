
<div class="dashboard-container" dir="rtl">
  <app-sidebar></app-sidebar>
  
  <!-- Main Content -->
  <main class="main-content transition-all duration-300 ease-in-out" 
        [ngClass]="getMainContentClass()">
    
    <!-- Mobile Header -->
    <div class="lg:hidden bg-white p-4 shadow-md sticky top-0 z-30">
      <div class="flex justify-between items-center">
        <button (click)="toggleSidebar()" 
                class="p-2 bg-teal-50 text-teal-600 rounded-full hover:bg-teal-100 transition-colors">
          <i class="pi pi-bars"></i>
        </button>
        <div class="flex items-center">
          <i class="pi pi-book text-lg text-teal-600 ml-2"></i>
          <h2 class="text-lg font-bold text-teal-800">دار الكتاب</h2>
        </div>
      </div>
    </div>

    <!-- Header -->
    <header class="bg-white shadow-sm rounded-lg mx-4 mt-4 mb-6">
      <div class="p-6">
        <div class="flex justify-between items-center">
          <div class="flex items-center">
            <button *ngIf="!isMobile" 
                    (click)="toggleSidebar()"
                    class="p-2 bg-teal-50 text-teal-600 rounded-full hover:bg-teal-100 transition-colors ml-4">
              <i class="pi" [class.pi-bars]="isCollapsed" [class.pi-times]="!isCollapsed"></i>
            </button>
            <div>
              <h1 class="text-3xl font-bold text-teal-800">مركز التحكم الإداري</h1>
              <p class="text-teal-600 mt-1">إدارة شاملة لجميع عمليات دار الكتاب</p>
            </div>
          </div>
          <div class="flex items-center space-x-4 space-x-reverse">
            <div class="relative">
              <button class="p-2 bg-gray-100 rounded-full text-gray-600 hover:bg-teal-50 hover:text-teal-700 transition-colors">
                <i class="pi pi-bell"></i>
                <span class="absolute -top-1 -left-1 w-5 h-5 bg-red-500 text-white text-xs rounded-full flex items-center justify-center">3</span>
              </button>
            </div>
            <div class="text-right hidden md:block">
              <p class="text-sm text-gray-500">اليوم</p>
              <p class="font-medium text-gray-900">3 يوليو 2025</p>
            </div>
          </div>
        </div>
      </div>
    </header>

    <!-- Dashboard Content -->
    <div class="px-4 pb-10">
      <!-- Overview Stats -->
      <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6 mb-8">
        <!-- Total Students -->
        <div class="bg-white p-6 rounded-xl shadow-lg stat-card hover:shadow-xl transition-all duration-300">
          <div class="flex items-center justify-between">
            <div class="text-right">
              <p class="text-gray-500 text-sm">إجمالي الطلاب</p>
              <h2 class="text-3xl font-bold text-gray-800 mt-1">{{ stats.totalStudents }}</h2>
              <p class="text-green-600 text-xs mt-1">{{ stats.activeStudents }} نشط</p>
            </div>
            <div class="bg-gradient-to-br from-blue-500 to-blue-600 p-4 rounded-full text-white">
              <i class="pi pi-users text-2xl"></i>
            </div>
          </div>
        </div>

        <!-- Total Teachers -->
        <div class="bg-white p-6 rounded-xl shadow-lg stat-card hover:shadow-xl transition-all duration-300">
          <div class="flex items-center justify-between">
            <div class="text-right">
              <p class="text-gray-500 text-sm">إجمالي المعلمين</p>
              <h2 class="text-3xl font-bold text-gray-800 mt-1">{{ stats.totalTeachers }}</h2>
              <p class="text-green-600 text-xs mt-1">{{ stats.activeTeachers }} متاح</p>
            </div>
            <div class="bg-gradient-to-br from-green-500 to-green-600 p-4 rounded-full text-white">
              <i class="pi pi-user-edit text-2xl"></i>
            </div>
          </div>
        </div>

        <!-- Monthly Revenue -->
        <div class="bg-white p-6 rounded-xl shadow-lg stat-card hover:shadow-xl transition-all duration-300">
          <div class="flex items-center justify-between">
            <div class="text-right">
              <p class="text-gray-500 text-sm">الإيرادات الشهرية</p>
              <h2 class="text-3xl font-bold text-gray-800 mt-1">{{ stats.monthlyRevenue | number }}</h2>
              <p class="text-blue-600 text-xs mt-1">ريال سعودي</p>
            </div>
            <div class="bg-gradient-to-br from-purple-500 to-purple-600 p-4 rounded-full text-white">
              <i class="pi pi-money-bill text-2xl"></i>
            </div>
          </div>
        </div>

        <!-- Pending Actions -->
        <div class="bg-white p-6 rounded-xl shadow-lg stat-card hover:shadow-xl transition-all duration-300">
          <div class="flex items-center justify-between">
            <div class="text-right">
              <p class="text-gray-500 text-sm">الإجراءات المعلقة</p>
              <h2 class="text-3xl font-bold text-gray-800 mt-1">{{ pendingActions.length }}</h2>
              <p class="text-red-600 text-xs mt-1">تحتاج للمراجعة</p>
            </div>
            <div class="bg-gradient-to-br from-red-500 to-red-600 p-4 rounded-full text-white">
              <i class="pi pi-exclamation-triangle text-2xl"></i>
            </div>
          </div>
        </div>
      </div>

      <!-- Critical Alerts -->
      <!-- <div class="mb-8">
        <h2 class="text-xl font-bold text-gray-800 mb-4">تنبيهات مهمة</h2>
        <div class="grid grid-cols-1 gap-4">
          <div *ngFor="let alert of criticalAlerts" 
               class="p-4 rounded-lg border-r-4 transition-all duration-300 hover:shadow-md"
               [ngClass]="getSeverityColor(alert.severity)">
            <div class="flex items-center">
              <i class="pi pi-exclamation-triangle text-lg ml-3"></i>
              <p class="font-medium">{{ alert.message }}</p>
              <button class="mr-auto px-3 py-1 bg-white bg-opacity-50 rounded-full text-xs font-medium hover:bg-opacity-70 transition-colors">
                معالجة
              </button>
            </div>
          </div>
        </div>
      </div> -->

      <!-- Main Dashboard Grid -->
      <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
        <!-- Left Column (2/3 width) -->
        <div class="lg:col-span-2 space-y-6">
          <!-- Administrative Actions -->
          <!-- <div class="bg-white p-6 rounded-xl shadow-lg">
            <h3 class="text-xl font-bold text-gray-800 mb-6">الإجراءات الإدارية</h3>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
              <div *ngFor="let action of pendingActions" 
                   class="p-4 border border-gray-200 rounded-lg hover:shadow-md transition-all duration-300 cursor-pointer"
                   (click)="handlePendingAction(action)">
                <div class="flex items-center justify-between">
                  <div class="flex items-center">
                    <div class="w-12 h-12 rounded-full flex items-center justify-center ml-4"
                         [ngClass]="'bg-' + action.color + '-100 text-' + action.color + '-600'">
                      <i class="pi text-xl" [ngClass]="action.icon"></i>
                    </div>
                    <div>
                      <h4 class="font-medium text-gray-800">{{ action.title }}</h4>
                      <p class="text-sm text-gray-600 mt-1">{{ action.count }} عنصر</p>
                    </div>
                  </div>
                  <div class="flex flex-col items-end">
                    <span class="px-2 py-1 rounded-full text-xs font-medium mb-2"
                          [ngClass]="getPriorityColor(action.priority)">
                      {{ action.priority === 'high' ? 'عالي' : action.priority === 'medium' ? 'متوسط' : 'منخفض' }}
                    </span>
                    <i class="pi pi-angle-left text-gray-400"></i>
                  </div>
                </div>
              </div>
            </div>
          </div> -->

          <!-- Management Tools -->
          <div class="bg-white p-6 rounded-xl shadow-lg">
            <h3 class="text-xl font-bold text-gray-800 mb-6">أدوات الإدارة</h3>
            <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
              <button routerLink="/students" 
                      class="p-4 bg-blue-50 border border-blue-200 rounded-lg hover:bg-blue-100 transition-colors group">
                <div class="text-center">
                  <i class="pi pi-users text-3xl text-blue-600 mb-3"></i>
                  <h4 class="font-medium text-blue-800">إدارة الطلاب</h4>
                  <p class="text-sm text-blue-600 mt-1">عرض وتعديل بيانات الطلاب</p>
                </div>
              </button>
              
              <button routerLink="/teachers" 
                      class="p-4 bg-green-50 border border-green-200 rounded-lg hover:bg-green-100 transition-colors group">
                <div class="text-center">
                  <i class="pi pi-user-edit text-3xl text-green-600 mb-3"></i>
                  <h4 class="font-medium text-green-800">إدارة المعلمين</h4>
                  <p class="text-sm text-green-600 mt-1">متابعة أداء المعلمين</p>
                </div>
              </button>
              
              <button routerLink="/groups" 
                      class="p-4 bg-purple-50 border border-purple-200 rounded-lg hover:bg-purple-100 transition-colors group">
                <div class="text-center">
                  <i class="pi pi-sitemap text-3xl text-purple-600 mb-3"></i>
                  <h4 class="font-medium text-purple-800">إدارة المجموعات</h4>
                  <p class="text-sm text-purple-600 mt-1">تنظيم المجموعات الدراسية</p>
                </div>
              </button>
              
              <button routerLink="/financial" 
                      class="p-4 bg-amber-50 border border-amber-200 rounded-lg hover:bg-amber-100 transition-colors group">
                <div class="text-center">
                  <i class="pi pi-credit-card text-3xl text-amber-600 mb-3"></i>
                  <h4 class="font-medium text-amber-800">الإدارة المالية</h4>
                  <p class="text-sm text-amber-600 mt-1">متابعة المدفوعات والرسوم</p>
                </div>
              </button>
              
              <button routerLink="/reports" 
                      class="p-4 bg-teal-50 border border-teal-200 rounded-lg hover:bg-teal-100 transition-colors group">
                <div class="text-center">
                  <i class="pi pi-chart-bar text-3xl text-teal-600 mb-3"></i>
                  <h4 class="font-medium text-teal-800">التقارير والإحصائيات</h4>
                  <p class="text-sm text-teal-600 mt-1">تقارير شاملة ومفصلة</p>
                </div>
              </button>
              
              <button routerLink="/settings" 
                      class="p-4 bg-gray-50 border border-gray-200 rounded-lg hover:bg-gray-100 transition-colors group">
                <div class="text-center">
                  <i class="pi pi-cog text-3xl text-gray-600 mb-3"></i>
                  <h4 class="font-medium text-gray-800">إعدادات النظام</h4>
                  <p class="text-sm text-gray-600 mt-1">تخصيص إعدادات المركز</p>
                </div>
              </button>
            </div>
          </div>
        </div>

        <!-- Right Column (1/3 width) -->
        <div class="space-y-6">
          <!-- Quick Actions -->
          <div class="bg-white p-6 rounded-xl shadow-lg">
            <h3 class="text-lg font-semibold text-gray-800 mb-4">إجراءات سريعة</h3>
            <div class="space-y-3">
              <button routerLink="/student/add" 
                      class="w-full flex items-center justify-center p-3 bg-gradient-to-r from-blue-500 to-blue-600 text-white rounded-lg hover:shadow-lg transition-all">
                <i class="pi pi-user-plus text-lg ml-2"></i>
                <span class="font-medium">تسجيل طالب جديد</span>
              </button>
              
              <button routerLink="/teacher/add" 
                      class="w-full flex items-center justify-center p-3 bg-gradient-to-r from-green-500 to-green-600 text-white rounded-lg hover:shadow-lg transition-all">
                <i class="pi pi-user-plus text-lg ml-2"></i>
                <span class="font-medium">إضافة معلم جديد</span>
              </button>
              
              <button routerLink="/group/add" 
                      class="w-full flex items-center justify-center p-3 bg-gradient-to-r from-purple-500 to-purple-600 text-white rounded-lg hover:shadow-lg transition-all">
                <i class="pi pi-plus-circle text-lg ml-2"></i>
                <span class="font-medium">إنشاء مجموعة جديدة</span>
              </button>
              
              <button routerLink="/backup" 
                      class="w-full flex items-center justify-center p-3 bg-gradient-to-r from-amber-500 to-amber-600 text-white rounded-lg hover:shadow-lg transition-all">
                <i class="pi pi-download text-lg ml-2"></i>
                <span class="font-medium">نسخة احتياطية</span>
              </button>
            </div>
          </div>

          <!-- Recent Activity -->
          <div class="bg-white p-6 rounded-xl shadow-lg">
            <h3 class="text-lg font-semibold text-gray-800 mb-4">النشاطات الأخيرة</h3>
            <div class="space-y-4">
              <div *ngFor="let activity of recentActivities" 
                   class="flex items-start">
                <div class="w-8 h-8 rounded-full flex items-center justify-center ml-3"
                     [ngClass]="'bg-' + activity.color + '-100'">
                  <i class="pi text-sm"
                     [ngClass]="[activity.icon, 'text-' + activity.color + '-600']"></i>
                </div>
                <div class="flex-1">
                  <p class="text-sm font-medium text-gray-800">{{ activity.message }}</p>
                  <p class="text-xs text-gray-500 mt-1">منذ {{ activity.time }}</p>
                </div>
              </div>
            </div>
          </div>

          <!-- System Status -->
          <div class="bg-white p-6 rounded-xl shadow-lg">
            <h3 class="text-lg font-semibold text-gray-800 mb-4">حالة النظام</h3>
            <div class="space-y-4">
              <div class="flex items-center justify-between">
                <div class="flex items-center">
                  <div class="w-3 h-3 bg-green-500 rounded-full ml-2"></div>
                  <span class="text-sm text-gray-600">قاعدة البيانات</span>
                </div>
                <span class="text-sm font-medium text-green-600">متصلة</span>
              </div>
              
              <div class="flex items-center justify-between">
                <div class="flex items-center">
                  <div class="w-3 h-3 bg-green-500 rounded-full ml-2"></div>
                  <span class="text-sm text-gray-600">الخادم</span>
                </div>
                <span class="text-sm font-medium text-green-600">يعمل</span>
              </div>
              
              <div class="flex items-center justify-between">
                <div class="flex items-center">
                  <div class="w-3 h-3 bg-blue-500 rounded-full ml-2"></div>
                  <span class="text-sm text-gray-600">النسخ الاحتياطي</span>
                </div>
                <span class="text-sm font-medium text-blue-600">محدث</span>
              </div>
              
              <div class="flex items-center justify-between">
                <div class="flex items-center">
                  <div class="w-3 h-3 bg-amber-500 rounded-full ml-2"></div>
                  <span class="text-sm text-gray-600">مساحة التخزين</span>
                </div>
                <span class="text-sm font-medium text-amber-600">78%</span>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </main>
</div>
